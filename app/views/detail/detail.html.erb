<div id="detail-results" data-detail-json="<%= @data.to_json %>">
  <div class="col-lg-12 detail-header">
    <h2>Details - <span class="detail-header-name"><%= @data[:name] %></span></h2>
    <hr>
  </div>
  <%= @data %>
  <div class="detail-body">
    <div class="detail-data col-lg-4">
      <table class="table table-striped table-hover">
        <tbody>
          <% if  @data[:name] %>
            <tr>
              <td colspan="2" class="text-center"><%= @data[:name] %></td>
            </tr>
          <% end %>
          <% if @data[:address] %>
            <tr>
              <td>Address:</td>
              <td><%= @data[:address].split.map(&:capitalize).join(' ') %></td>
            </tr>
          <% end %>
          <% if @data[:pretty_loc] != nil %>
            <tr>
              <td>Location:</td>
              <td>
                <%= @data[:pretty_loc][:lat][0].to_s + '° ' + @data[:pretty_loc][:lat][1].to_s + "' " + @data[:pretty_loc][:lat][2].to_s + '" ' + @data[:pretty_loc][:lat][3].to_s %>, 
                <%= @data[:pretty_loc][:lng][0].to_s + '° ' + @data[:pretty_loc][:lng][1].to_s + "' " + @data[:pretty_loc][:lng][2].to_s + '" ' + @data[:pretty_loc][:lng][3].to_s %>
                <br>
                lat <%= @data[:geometry][:lat].round(4).to_s + ', lng ' + @data[:geometry][:lng].round(4).to_s %>
              </td>
            </tr>
          <% end %>
          <% if @data[:detail][:phones].length %>
            <tr>
              <td>Phone:</td>
              <td>
                <%= @data[:detail][:phones].join ', ' %>
              </td>
            </tr>
          <% end %>
          <% if @data[:origin] != nil %>
            <tr>
              <td>Source:</td>
              <td><%= @data[:origin] %></td>
            </tr>
          <% end %>
          <% if @data[:detail] && (@data[:detail][:url] || @data[:detail][:website_url]) %>
            <tr>
              <td>Website:</td>
              <td class="text-center detail-links">
                <% if @data[:detail][:url] %>
                  <div class="link">
                    <%= link_to @data[:detail][:url], @data[:detail][:url], :target => '_blank' %>
                  </div>
                <% end %>
                <% if @data[:detail][:website_url] %>
                  <div class="link">
                    <%= link_to @data[:detail][:website_url], @data[:detail][:website_url], :target => '_blank' %>
                  </div>
                <% end %>
              </td>
            </tr>
          <% end %>
          <% if @data[:geometry] && (@data[:geometry][:lat] != nil && @data[:geometry][:lng] != nil) %>
            <tr>
              <td colspan="2" class="text-center">
                <%= image_tag 'icon-google-map.png', size: '19x19' %> <a target="_blank" href="http://maps.google.com/maps?q=<%= u @data[:geometry][:lat].to_s + ',' + @data[:geometry][:lng].to_s %>">Google Maps</a> | 
                <%= image_tag 'icon-bing-map.png', size: '19x19' %> <a target="_blank" href="http://bing.com/maps/default.aspx?cp=<%= u @data[:geometry][:lat].to_s + '~' + @data[:geometry][:lng].to_s %>&lvl=16">Bing Maps</a> | 
                <%= image_tag 'icon-openstreetmap.png', size: '19x19' %> <a target="_blank" href="http://www.openstreetmap.org/?mlat=<%= u @data[:geometry][:lat].to_s %>&mlon=<%= @data[:geometry][:lng].to_s %>&zoom=14">OpenStreetMap</a>
              </td>
            </tr>
          <% end %>
          <% if (@data[:distance] != nil && @data[:distance_unit] != nil) || @data[:distance_in_mins] != nil || @data[:car_distance_in_mins]  %>
            <tr>
              <td colspan="2" class="text-center">
                <% if @data[:distance] != nil && @data[:distance_unit] != nil %>
                  <span class="label label-danger"><%= @data[:distance] %> <%= @data[:distance_unit] %> away</span>
                <% end %>
                <% if @data[:distance_in_mins] != nil %>
                  <span class="label label-primary"><%= (@data[:distance_in_mins] > 0 ? @data[:distance_in_mins] : '< 1') %> min walk</span>
                <% end %>
                <% if @data[:car_distance_in_mins] != nil %>
                  <span class="label label-info"><%= (@data[:car_distance_in_mins] > 0 ? @data[:car_distance_in_mins] : '< 1') %> min drive</span>
                <% end %>
              </td>
            </tr>
          <% end %>
          <tr>
            <td colspan="2" class="text-center">
              <% if @data[:tags].is_a? Array %>
                <% @data[:tags].each do |label| %>
                  <span class="label label-success"><%= label %></span>
                <% end %>
              <% end %>
            </td>
          </tr>
          <tr>
            <td colspan="2" class="text-center">
              <div class="social-likes" data-counters="no">
                <div class="facebook" title="Share link on Facebook">Facebook</div>
                <div class="twitter" title="Share link on Twitter">Twitter</div>
                <div class="plusone" title="Share link on Google+">Google+</div>
              </div>
            </td>
          </tr>
        </tbody>
      </table> 
    </div>
    <div class="col-lg-8"><div id="map_canvas"></div></div>
  </div>
  <div class="col-lg-12 detail-footer">
    <hr>
  </div>
</div>